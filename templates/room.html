<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/uikit.min.css" />
        <link rel="stylesheet" href="/static/css/room.css" />
        <title>webmcast -- {{.ID}}</title>
    </head>
    <body data-stream-id="{{.ID}}">
        <article class="content">
            <nav class="navbar">
                <a href="/" class="brand">webmcast</a>
                <span class="search uk-form">
                    <input type="text" placeholder="Search???" />
                </span>
                <a href="#">Login?</a>
                <a href="#">Sign up?</a>
            </nav>

            <section class="player-block">
            {{ if not .Stream }}
                <div class="player has-video" data-status="error">
                    <svg width="853" height="480"></svg>
            {{- else -}}
                <div class="player{{- if .Stream.HasVideo}} has-video{{end -}}
                                  {{- if .Stream.HasAudio}} has-audio{{end -}}" data-status="error">
                    {{- /* `video` with `height: auto` will always use the default aspect ratio.
                        so instead we enforce the size of this element with an empty image. */ -}}
                    <svg width="{{.Stream.Width}}" height="{{.Stream.Height}}"></svg>
            {{- end -}}
                    <video></video><div class="controls">
                        <div class="button mute" title="Mute"></div>
                        <div class="volume" title="Volume"><div class="slider"></div></div>
                        <div class="status">not connected</div>
                        <div class="button theatre" title="Theatre mode"></div>
                        <div class="button fullscreen" title="Fullscreen"></div>
                        <div class="button collapse" title="Normal view"></div>
                    </div>
                </div>
            </section>

            <header class="meta">
                <img class="avatar" alt="{{.ID}}" src="{{.Meta.GravatarURL 60}}" />
                <div>
                    <h1 class="name">{{or .Meta.Name (printf "#%s" .ID)}}</h1>
                    <h2 class="creator">{{or .Meta.UserName "anonymous"}}</h2>
                {{ if .Stream }}
                    <h2 class="created">{{.Stream.Created.Format "02.01.2006, 15:04:05 MST"}}</h2>
                {{- else -}}
                    <h2 class="offline">is now offline.</h2>
                {{- end -}}
                </div>
                <h2 class="viewers" title="Viewers">
                    {{ if .Stream }}{{len .Stream.Chat.Users}}{{ else }}0{{ end }}
                </h2>
            </header>
        </article>

        <aside class="chat">
            <h1>{{.ID}}</h1>
            <ul class="log">
                <li class="empty-message">Nothing here.</li>
            </ul>
            <template class="message-template">
                <li class="message">
                    <span class="name"></span>
                    <span class="text"></span>
                </li>
            </template>
            <div class="offline-message">Chat offline.</div>
            <form class="login-form uk-form">
                <fieldset>
                    <input class="input" placeholder="What's your name?" />
                </fieldset>
                <fieldset>
                    <button class="uk-button uk-button-primary" type="submit">Join</button>
                </fieldset>
            </form>
            <form class="input-form uk-form">
                <fieldset>
                    <textarea class="input" cols="1" rows="2" placeholder="Write a message"></textarea>
                </fieldset>
                <fieldset>
                    <button class="uk-button uk-button-link uk-icon-smile-o uk-icon-small uk-icon-hover"></button>
                    <button class="uk-button uk-button-primary" type="submit">Send</button>
                </fieldset>
            </form>
            <div class="tab"></div>
        </aside>

        <script src="/static/js/vendored.min.js"></script>
        <script src="/static/js/room.js"></script>
    </body>
</html>
