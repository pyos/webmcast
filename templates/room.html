<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/global.css" />
        <link rel="stylesheet" href="/static/css/room.css" />
        <title>webmcast -- {{.ID}}</title>
    </head>
    <body class="{{if not .Meta.HasVideo}}no-video{{end}}">
        <template id="edit-name-template">
            <form method="POST" action="/user/set-stream-name" data-xhrable>
                <input type="text" name="value" />
                <button type="submit">Save</button>
            </form>
        </template>
        <template id="edit-panel-template">
            <form method="POST" action="/user/set-stream-panel" data-xhrable>
                <input type="hidden" name="id" value="" />
                <textarea name="value" rows="6" cols="10"></textarea>
                <p class="error"></p>
                <button type="submit">Save</button>
                <button type="reset">Cancel</button>
                <button type="reset" class="remove">Remove</button>
            </form>
        </template>
        <template id="chat-message-template">
            <li class="message">
                <span class="name"></span>
                <span class="text"></span>
            </li>
        </template>
        <article id="content" data-scrollbar data-stream-id="{{.ID}}">
            {{ template "nav.html" . }}
            <section class="player-block invert-block">
                <div class="player{{- if .Meta.HasVideo}} has-video{{end -}}
                                  {{- if .Meta.HasAudio}} has-audio{{end -}}" data-status="error">
                    {{- /* `video` with `height: auto` will always use the default aspect ratio.
                        so instead we enforce the size of this element with an empty image. */}}
                    <svg width="{{or .Meta.Width 853}}" height="{{or .Meta.Height 480}}"></svg>
                    <video crossorigin></video><div class="controls">
                        <a href="#" class="button mute" title="Mute"></a>
                        <div tabindex="0" class="volume" title="Volume"><div class="slider"></div></div>
                        <div class="status">not connected</div>
                        <a href="#" class="button theatre" title="Theatre mode"></a>
                        <a href="#" class="button fullscreen" title="Fullscreen"></a>
                        <a href="#" class="button collapse" title="Normal view"></a>
                    </div>
                </div>
                <aside class="chat-tab"></aside>
                <aside class="chat">
                    <h1>{{.ID}}</h1>
                    <ul class="log" data-scrollbar>
                        <li class="empty-message">No messages.</li>
                    </ul>
                    <div class="offline-message">Chat offline.</div>
                    <div class="error-message"></div>
                    <form class="login-form">
                        <input tabindex="1" type="text" class="input" placeholder="What's your name?" />
                        <button tabindex="1" type="submit">Join</button>
                    </form>
                    <form class="input-form">
                        <textarea tabindex="1" class="input" cols="1" rows="1" placeholder="Write a message"></textarea>
                        <button tabindex="1" type="submit">Send</button>
                        <a href="#" class="button ins-emoji" title="Emoji..."></a>
                    </form>
                </aside>
            </section>
            <section class="stream-info center-block">
                <div class="user-header">
                    <img class="avatar" alt="{{.ID}}" src="{{.Meta.GravatarURL 60}}" />
                    <div>
                        {{ if .Owned }}<h1 class="edit"><a href="#" title="Edit..."></a></h1>{{ end }}
                        <h1 class="name">{{or .Meta.Name (printf "#%s" .ID)}}</h1>
                        <h2 class="creator">{{or .Meta.UserName "anonymous"}}</h2>
                        {{ if not .Online }}<h2 class="offline">is now offline.</h2>{{ end }}
                    </div>
                    <div>
                        {{- if .Online }}<h2 class="viewers" title="Viewers">???</h2>{{ end -}}
                    </div>
                </div>
                <div class="about">
                {{- range $id, $_ := .Meta.Panels }}
                    <div class="panel">
                    {{- if $.Owned }}
                        <h1 class="edit" data-panel="{{$id}}" title="Edit panel..."><a href="#"></a></h1>
                    {{- end }}
                        <p data-markup>{{.Text}}</p>
                    </div>
                {{- end }}
                {{- if .Owned }}
                    <div class="panel new-panel">
                        <h1 class="edit"><a href="#" title="New panel..."></a></h1>
                        <p data-markup>*Edit this to create a new panel*</p>
                    </div>
                {{- end }}
                </div>
            </section>
            {{ template "footer.html" }}
        </article>

        <script src="/static/js/vendored.min.js"></script>
        <script src="/static/js/global.js"></script>
        <script src="/static/js/markup.js"></script>
        <script src="/static/js/room.js"></script>
    </body>
</html>
